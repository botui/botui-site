"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{220:function(e,t,n){var r=n(7294);t.Z=r.createContext(null)},7462:function(e,t,n){n.d(t,{Z:function(){return r}});function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},5068:function(e,t,n){function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,{Z:function(){return i}})},3366:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}},4647:function(e,t,n){n.d(t,{_:function(){return u}});var r=n(7294),i=n(2071),a=n(2453),o=n(6165),s=n(9737),l=n(5597);let u=({bot:e,children:t})=>{let[n,u]=(0,r.useState)(null),[c,d]=(0,r.useState)([]);return(0,r.useEffect)(()=>{e?.onChange?.(i.I9.MESSAGE,e=>{d([...e])}),e?.onChange?.(i.I9.ACTION,e=>{u({...e})})},[e]),r.createElement(o._.Provider,{value:{bot:e}},r.createElement(s.f.Provider,{value:n},r.createElement(l.E.Provider,{value:c},r.createElement("div",{className:a.F.botui_app_container},r.createElement("div",{className:a.F.botui_container},t)))))}},5657:function(e,t,n){n.d(t,{tp:function(){return v}});var r=n(7294),i=n(2071);let a={buttons:{confirm:"Done",cancel:"Cancel"},messages:{cancel:"Cancelled"}};var o=n(2453),s=n(6165),l=n(9737),u=n(4954);function c(e){return r.createElement("button",{onClick:t=>e?.onClick?.(t),className:`${o.F.botui_button} ${e?.classes??""}`},e?.text)}function d(e){return r.createElement(c,{classes:"cancel",text:e?.cancelButtonText??a.buttons.cancel,onClick(t){t.preventDefault(),e?.onClick?.({canceled:!0,text:e?.cancelMessageText??a.messages.cancel})}})}let p=()=>{let e=(0,s.Z)(),t=(0,l.i)(),n=t?.meta,i=Math.max(t?.data.options.findIndex(e=>e.selected),0),[u,c]=(0,r.useState)(i),p=(0,r.useMemo)(()=>t?.data.options[u],[u]);return r.createElement(r.Fragment,null,r.createElement("select",{autoFocus:!0,value:u,multiple:t.data.isMultiSelect,onChange(e){c(parseInt(e.target.value))}},t?.data.options.map((e,t)=>r.createElement("option",{key:e.value,value:t},e.label||e.value))),r.createElement("button",{className:o.F.botui_button,onClick:()=>e.next({selected:p,text:p.label||p.value})},n?.confirmButtonText??a.buttons.confirm),n?.cancelable?r.createElement(d,{...n,onClick(t){e.next({selected:null,...t})}}):null)},m=()=>{let e=(0,s.Z)(),t=(0,l.i)(),n=t?.meta;return r.createElement(r.Fragment,null,t?.data.options.map((t,n)=>r.createElement("button",{key:n,autoFocus:0===n,className:o.F.botui_button,onClick:()=>setTimeout(()=>e.next({selected:t,text:t.label||t.value}),70)},t.label)),n?.cancelable?r.createElement(d,{...n,onClick(t){e.next({selected:null,...t})}}):null)},f=()=>r.createElement("div",{className:o.F.botui_wait},r.createElement("i",{className:"loading_dot"}),r.createElement("i",{className:"loading_dot"}),r.createElement("i",{className:"loading_dot"})),h=()=>{let e=(0,s.Z)(),t=(0,l.i)(),n=t?.meta,i=(0,r.useRef)(null),o=(0,r.useRef)(null);return(0,r.useEffect)(()=>{i?.current?.focus?.(),o?.current?.focus?.()},[]),r.createElement("form",{onSubmit(t){t.preventDefault();let n=o?.current?.value??i?.current?.value;e.next({text:n,value:i?.current?.files??n})}},t?.data?.type==="textarea"?r.createElement("textarea",{ref:o,...t?.data}):r.createElement("input",{type:"text",ref:i,...t?.data}),r.createElement(c,{text:n?.confirmButtonText??a.buttons.confirm}),n?.cancelable?r.createElement(d,{...n,onClick(t){e.next({value:null,...t})}}):null)},E={wait:f,input:h,select:p,selectButtons:m};function v({renderer:e={},bringIntoView:t=!0}){let n=(0,l.i)(),a=n?.meta?.actionType??"input",s={...E,...e},c=s.wait,d=s[a],p=[o.F.botui_action,"action_"+a];return r.createElement("div",{className:o.F.botui_action_container},n?.type==i.I9.ACTION?n?.meta?.waiting?r.createElement(c,null):void 0!==d?r.createElement(u.H9,{className:p.join(" ")},r.createElement(u.Rg,null,r.createElement(u.TW,{bringIntoView:t},r.createElement(d,null)))):`Action renderer not found: ${n?.meta?.actionType}. ${JSON.stringify(n.meta)}`:null)}},7645:function(e,t,n){n.d(t,{UX:function(){return x}});var r,i=n(7294),a=n(3366),o=n(7462),s=n(5068),l=n(220);function u(e,t){var n=Object.create(null);return e&&i.Children.map(e,function(e){return e}).forEach(function(e){var r;n[e.key]=t&&(0,i.isValidElement)(e)?t(e):e}),n}function c(e,t,n){return null!=n[t]?n[t]:e.props[t]}var d=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},p=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}(0,s.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,a,o,s,l,d,p=t.children,m=t.handleExited;return{children:t.firstRender?u(e.children,function(t){return(0,i.cloneElement)(t,{onExited:m.bind(null,t),in:!0,appear:c(t,"appear",e),enter:c(t,"enter",e),exit:c(t,"exit",e)})}):(Object.keys(d=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];s[i[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(p,l=u(e.children))).forEach(function(t){var n=d[t];if((0,i.isValidElement)(n)){var r=t in p,a=t in l,o=p[t],s=(0,i.isValidElement)(o)&&!o.props.in;a&&(!r||s)?d[t]=(0,i.cloneElement)(n,{onExited:m.bind(null,n),in:!0,exit:c(n,"exit",e),enter:c(n,"enter",e)}):a||!r||s?a&&r&&(0,i.isValidElement)(o)&&(d[t]=(0,i.cloneElement)(n,{onExited:m.bind(null,n),in:o.props.in,exit:c(n,"exit",e),enter:c(n,"enter",e)})):d[t]=(0,i.cloneElement)(n,{in:!1})}}),d),firstRender:!1}},n.handleExited=function(e,t){var n=u(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(t){var n=(0,o.Z)({},t.children);return delete n[e.key],{children:n}}))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,a.Z)(e,["component","childFactory"]),o=this.state.contextValue,s=d(this.state.children).map(n);return(delete r.appear,delete r.enter,delete r.exit,null===t)?i.createElement(l.Z.Provider,{value:o},s):i.createElement(l.Z.Provider,{value:o},i.createElement(t,r,s))},t}(i.Component);p.propTypes={},p.defaultProps={component:"div",childFactory:function(e){return e}};var m=n(2453),f=n(5597);let h=({message:e})=>i.createElement(i.Fragment,null,e?.data?.links.map((e,t)=>i.createElement("a",{...e,key:t},e.text)));var E,v=n(4954);(E=r||(r={})).text="text",E.embed="embed",E.image="image",E.links="links";let g={text:function({message:e}){return e?.data?.text?i.createElement(i.Fragment,null,e?.data?.text):null},image:function({message:e}){return i.createElement("img",{...e.data,src:e?.data?.src})},embed:function({message:e}){return i.createElement("iframe",{...e.data,src:e?.data?.src})},links:h},b=({message:e,renderers:t,bringIntoView:n=!0})=>{let r=e?.meta?.messageType??"text",a=t[r],o=[m.F.botui_message_content,"message_"+r,],s=e?.meta?.fromHuman||e?.meta?.previous?.type=="action";return s&&o.push("human"),i.createElement("div",{className:m.F.botui_message},i.createElement(v.H9,{className:o.join(" ")},i.createElement(v.TW,{bringIntoView:n},i.createElement(v.Rg,null,i.createElement(i.Fragment,null,a?i.createElement(a,{message:e}):e.meta.messageType)))))},x=({renderer:e={},bringIntoView:t=!0})=>{let n=(0,f.l)(),r={...g,...e};return i.createElement("div",{className:m.F.botui_message_list},i.createElement(p,null,n.map((e,n)=>i.createElement(b,{key:n,message:e,renderers:r,bringIntoView:t}))))}},4954:function(e,t,n){n.d(t,{TW:function(){return A},Rg:function(){return w},H9:function(){return M}});var r=n(7462),i=n(3366),a=n(5068);function o(e,t){return e.replace(RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var s=n(7294),l=n(3935),u={disabled:!1},c=n(220),d=function(e){return e.scrollTop},p="unmounted",m="exited",f="entering",h="entered",E="exiting",v=function(e){function t(t,n){r=e.call(this,t,n)||this;var r,i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=m,r.appearStatus=f):i=h:i=t.unmountOnExit||t.mountOnEnter?p:m,r.state={status:i},r.nextCallback=null,r}(0,a.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===p?{status:m}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==f&&n!==h&&(t=f):(n===f||n===h)&&(t=E)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){if(this.cancelNextCallback(),t===f){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:l.findDOMNode(this);n&&d(n)}this.performEnter(e)}else this.performExit()}else this.props.unmountOnExit&&this.state.status===m&&this.setState({status:p})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[l.findDOMNode(this),r],a=i[0],o=i[1],s=this.getTimeouts(),c=r?s.appear:s.enter;if(!e&&!n||u.disabled){this.safeSetState({status:h},function(){t.props.onEntered(a)});return}this.props.onEnter(a,o),this.safeSetState({status:f},function(){t.props.onEntering(a,o),t.onTransitionEnd(c,function(){t.safeSetState({status:h},function(){t.props.onEntered(a,o)})})})},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:l.findDOMNode(this);if(!t||u.disabled){this.safeSetState({status:m},function(){e.props.onExited(r)});return}this.props.onExit(r),this.safeSetState({status:E},function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:m},function(){e.props.onExited(r)})})})},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:l.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(!n||r){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)},n.render=function(){var e=this.state.status;if(e===p)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,i.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s.createElement(c.Z.Provider,{value:null},"function"==typeof n?n(e,r):s.cloneElement(s.Children.only(n),r))},t}(s.Component);function g(){}v.contextType=c.Z,v.propTypes={},v.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:g,onEntering:g,onEntered:g,onExit:g,onExiting:g,onExited:g},v.UNMOUNTED=p,v.EXITED=m,v.ENTERING=f,v.ENTERED=h,v.EXITING=E;var b=function(e,t){return e&&t&&t.split(" ").forEach(function(t){var n,r;(n=e).classList?n.classList.remove(t):"string"==typeof n.className?n.className=o(n.className,t):n.setAttribute("class",o(n.className&&n.className.baseVal||"",t))})},x=function(e){function t(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1];t.removeClasses(i,"exit"),t.addClass(i,a?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1];t.addClass(i,a?"appear":"enter","active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1]?"appear":"enter";t.removeClasses(i,a),t.addClass(i,a,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,i=r?(r&&n?n+"-":"")+e:n[e],a=r?i+"-active":n[e+"Active"],o=r?i+"-done":n[e+"Done"];return{baseClassName:i,activeClassName:a,doneClassName:o}},t}(0,a.Z)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r,i,a=this.getClassNames(t)[n+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&o&&(a+=" "+o),"active"===n&&e&&d(e),a&&(this.appliedClasses[t][n]=a,r=e,i=a,r&&i&&i.split(" ").forEach(function(e){return function(e,t){if(e.classList)e.classList.add(t);else{var n,r;(e.classList?!(t&&e.classList.contains(t)):-1===(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" "))&&("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}}(r,e)}))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,a=n.done;this.appliedClasses[t]={},r&&b(e,r),i&&b(e,i),a&&b(e,a)},n.render=function(){var e=this.props,t=(e.classNames,(0,i.Z)(e,["classNames"]));return s.createElement(v,(0,r.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(s.Component);function C(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function N(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function y(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n,r,i=getComputedStyle(e,null);return N(i.overflowY,t)||N(i.overflowX,t)||!!(r=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(t){return null}}(e))&&(r.clientHeight<e.scrollHeight||r.clientWidth<e.scrollWidth)}return!1}function _(e,t,n,r,i,a,o,s){return a<e&&o>t||a>e&&o<t?0:a<=e&&s<=n||o>=t&&s>=n?a-e-r:o>t&&s<n||a<e&&s>n?o-t+i:0}function k(e,t){var n=window,r=t.scrollMode,i=t.block,a=t.inline,o=t.boundary,s=t.skipOverflowHiddenElements,l="function"==typeof o?o:function(e){return e!==o};if(!C(e))throw TypeError("Invalid target");for(var u=document.scrollingElement||document.documentElement,c=[],d=e;C(d)&&l(d);){if((d=d.parentElement)===u){c.push(d);break}null!=d&&d===document.body&&y(d)&&!y(document.documentElement)||null!=d&&y(d,s)&&c.push(d)}for(var p=n.visualViewport?n.visualViewport.width:innerWidth,m=n.visualViewport?n.visualViewport.height:innerHeight,f=window.scrollX||pageXOffset,h=window.scrollY||pageYOffset,E=e.getBoundingClientRect(),v=E.height,g=E.width,b=E.top,x=E.right,N=E.bottom,k=E.left,O="start"===i||"nearest"===i?b:"end"===i?N:b+v/2,S="center"===a?k+g/2:"end"===a?x:k,T=[],w=0;w<c.length;w++){var A=c[w],M=A.getBoundingClientRect(),P=M.height,I=M.width,R=M.top,j=M.right,F=M.bottom,W=M.left;if("if-needed"===r&&b>=0&&k>=0&&N<=m&&x<=p&&b>=R&&N<=F&&k>=W&&x<=j)break;var D=getComputedStyle(A),Z=parseInt(D.borderLeftWidth,10),V=parseInt(D.borderTopWidth,10),H=parseInt(D.borderRightWidth,10),L=parseInt(D.borderBottomWidth,10),B=0,G=0,U="offsetWidth"in A?A.offsetWidth-A.clientWidth-Z-H:0,$="offsetHeight"in A?A.offsetHeight-A.clientHeight-V-L:0;if(u===A)B="start"===i?O:"end"===i?O-m:"nearest"===i?_(h,h+m,m,V,L,h+O,h+O+v,v):O-m/2,G="start"===a?S:"center"===a?S-p/2:"end"===a?S-p:_(f,f+p,p,Z,H,f+S,f+S+g,g),B=Math.max(0,B+h),G=Math.max(0,G+f);else{B="start"===i?O-R-V:"end"===i?O-F+L+$:"nearest"===i?_(R,F,P,V,L+$,O,O+v,v):O-(R+P/2)+$/2,G="start"===a?S-W-Z:"center"===a?S-(W+I/2)+U/2:"end"===a?S-j+H+U:_(W,j,I,Z,H+U,S,S+g,g);var X=A.scrollLeft,Y=A.scrollTop;O+=Y-(B=Math.max(0,Math.min(Y+B,A.scrollHeight-P+$))),S+=X-(G=Math.max(0,Math.min(X+G,A.scrollWidth-I+U)))}T.push({el:A,top:B,left:G})}return T}function O(e){return e===Object(e)&&0!==Object.keys(e).length}x.defaultProps={classNames:""},x.propTypes={};var S=function(e,t){var n=e.isConnected||e.ownerDocument.documentElement.contains(e);if(O(t)&&"function"==typeof t.behavior)return t.behavior(n?k(e,t):[]);if(n){var r,i=!1===t?{block:"end",inline:"nearest"}:O(t)?t:{block:"start",inline:"nearest"};return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach(function(e){var r=e.el,i=e.top,a=e.left;r.scroll&&n?r.scroll({top:i,left:a,behavior:t}):(r.scrollTop=i,r.scrollLeft=a)})}(k(e,i),i.behavior)}};let T=(0,s.createContext)(null);function w({children:e,timeout:t=50,visible:n=!0}){let r=(0,s.useContext)(T);return s.createElement(x,{nodeRef:{current:r},timeout:t,classNames:"slide-fade",in:null!==r&&n},e)}function A({children:e,bringIntoView:t=!0}){let n=(0,s.useContext)(T);return(0,s.useEffect)(()=>{n&&t&&S(n,{behavior:"smooth",scrollMode:"if-needed"})},[]),e}function M({children:e,className:t,as:n="div"}){let[r,i]=(0,s.useState)(null);return s.createElement(n,{className:t,ref:e=>i(e),children:s.createElement(T.Provider,{value:r},r?e:null)})}},6165:function(e,t,n){n.d(t,{Z:function(){return a},_:function(){return i}});var r=n(7294);let i=(0,r.createContext)({}),a=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("The `useBotUI` hook must be used inside the <BotUI> component's context.");return e.bot}},9737:function(e,t,n){n.d(t,{f:function(){return i},i:function(){return a}});var r=n(7294);let i=(0,r.createContext)(null),a=()=>(0,r.useContext)(i)},5597:function(e,t,n){n.d(t,{E:function(){return i},l:function(){return a}});var r=n(7294);let i=(0,r.createContext)([]),a=()=>(0,r.useContext)(i)},2453:function(e,t,n){var r,i;n.d(t,{F:function(){return r}}),(i=r||(r={})).botui_wait="botui_wait",i.botui_button="botui_button",i.botui_action="botui_action",i.botui_message="botui_message",i.botui_container="botui_container",i.botui_message_list="botui_message_list",i.botui_app_container="botui_app_container",i.botui_message_content="botui_message_content",i.botui_action_container="botui_action_container",i.botui_message_container="botui_message_container"},2071:function(e,t,n){var r,i;function a(e,t,n,r){return{key:null!=r?r:-1,type:e,meta:t,data:n}}n.d(t,{I9:function(){return o},lz:function(){return s}}),(i=r=r||(r={})).ACTION="action",i.MESSAGE="message";let o=r,s=()=>{let e=function(){let e=[],t=t=>(e.push(t),e),n=t=>{let n=t;return e.forEach(e=>{n=null==e?void 0:e(n)}),n};return{registerPlugin:t,runWithPlugins:n}}(),t,n=(t=(...e)=>{},{set(e){t=e},resolve:(...e)=>t(...e)}),r={[o.MESSAGE](){},[o.ACTION](){}},i=(e="",t)=>{let n=r[e];n(t)},s=function(e=(e=[])=>{}){let t=[],n=(e=-1)=>t.findIndex(t=>t.key===e),r=e=>{let n=t.length;return e.key=n,t.push(e),n};return{getAll:()=>t,setAll(n){n.forEach(e=>r(Object.assign({},e))),e(t)},get:e=>t[n(e)],add(n){let i=r(n);return e(t),i},update(r,i){let a=n(r);t[a]=i,e(t)},remove(r){let i=n(r);t.splice(i,1),e(t)},clear(){e(t=[])}}}(e=>{i(o.MESSAGE,e)}),l=function(e=e=>{}){let t=null;return{get:()=>t,set(n){e(t=n)},clear(){e(t=null)}}}(e=>{i(o.ACTION,e)}),u={message:{add:(t={text:""},r)=>new Promise(i=>{n.set(i);let l=s.add(e.runWithPlugins(a(o.MESSAGE,r,t)));n.resolve(l)}),getAll:()=>Promise.resolve(s.getAll()),setAll:e=>(s.setAll(e),Promise.resolve(s.getAll())),get:(e=0)=>Promise.resolve(s.get(e)),remove:(e=0)=>(s.remove(e),Promise.resolve()),update(t=0,n={},r){let i=s.get(t),l=r?Object.assign(Object.assign({},i.meta),r):i.meta,u=n?Object.assign(Object.assign({},i.data),n):i.data;return s.update(t,e.runWithPlugins(a(o.MESSAGE,l,u,t))),Promise.resolve()},removeAll:()=>(s.clear(),Promise.resolve())},action:{set:(t={},r)=>new Promise(i=>{let u=a(o.ACTION,r,t);l.set(u),n.set((t,n)=>{l.clear(),!0!==r.ephemeral&&s.add(e.runWithPlugins(a(o.MESSAGE,Object.assign(Object.assign({},n),{previous:u}),t))),i(t)})}),get:()=>Promise.resolve(l.get())},wait:(e,t,n)=>((null==e?void 0:e.waitTime)&&setTimeout(()=>u.next(t,n),e.waitTime),u.action.set({},{waiting:!0,ephemeral:!0})),onChange:(e,t)=>(r[e]=t,u),next:(...e)=>(n.resolve(...e),u),use:t=>(e.registerPlugin(t),u)};return u}}}]);